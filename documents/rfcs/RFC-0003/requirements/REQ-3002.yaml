rfc_requirement:
  schema_version: "2026-01-24"
  template_version: "2026-01-24"
  id: REQ-3002
  type: FUNCTIONAL
  title: "Episode controller with predicate-based stop conditions"
  statement: |
    The framework MUST implement an episode controller that:
    - Constructs EpisodeContext with goal, state snapshot, constraints, and budget
    - Executes bounded episodes via Holon::execute_episode()
    - Evaluates stop conditions after each episode
    - Supports stop conditions: Continue, GoalSatisfied, BudgetExhausted, Blocked, Escalate
    - Emits ledger events for episode lifecycle (started, completed)
    - Enforces budget limits within episodes
  acceptance_criteria:
  - EpisodeContext is constructed correctly from work state and artifacts.
  - All five StopCondition variants are handled correctly.
  - GoalSatisfied requires evidence to be present.
  - BudgetExhausted triggers when any resource dimension is exhausted.
  - Blocked and Escalate propagate correctly to caller.
  - Episode events are recorded in ledger.
  evidence:
    evidence_ids:
    - EVID-3002
    inherited_from_prd: false
    notes:
    - "Validated by episode integration tests"
    - "Embodies Axiom V (Active Inference) from Principia Holonica"

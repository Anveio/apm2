rfc_ticket_decomposition:
  schema_version: "2026-01-24"
  template_version: "2026-01-24"
  principles:
  - "Tickets are atomic and independently verifiable"
  - "Each ticket references requirement_ids and evidence_ids"
  - "Cross-ticket dependencies are explicit and minimal"
  - "Tickets are ordered to enable incremental progress"
  - "Framework types must be complete before integration"
  ticket_plan:
    ticket_storage_root: "documents/work/tickets/"
    tickets:
    # =================================================================
    # PHASE 1: Core Types and Traits
    # =================================================================
    - ticket_id: TCK-00040
      title: "Define Holon trait and core types"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00040.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00040.md"
      scope:
        in_scope:
        - "Create apm2-holon crate structure"
        - "Define Holon trait with associated types"
        - "Define EpisodeContext, EpisodeResult types"
        - "Define StopCondition enum"
        - "Define HolonError error types"
        - "Add basic documentation"
        out_of_scope:
        - "Episode controller implementation (TCK-00044)"
        - "Concrete holon implementations"
      binds:
        requirement_ids:
        - REQ-0034
        - REQ-3001
        evidence_ids:
        - EVID-3001
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies: []
      definition_of_done:
        criteria:
        - "Holon trait compiles with all methods"
        - "Associated types are properly constrained"
        - "Example impl demonstrates trait usage"
        - "Documentation complete for public items"
        - "Unit tests for type construction"
        evidence_ids:
        - EVID-3001

    - ticket_id: TCK-00041
      title: "Implement WorkObject and lifecycle state machine"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00041.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00041.md"
      scope:
        in_scope:
        - "Define WorkObject struct"
        - "Define WorkLifecycle enum with all states"
        - "Implement state transition validation"
        - "Define AttemptRecord for execution history"
        - "Implement lifecycle event emission"
        out_of_scope:
        - "Ledger persistence (uses events from TCK-00043)"
        - "Work projection reducer"
      binds:
        requirement_ids:
        - REQ-0014
        - REQ-3003
        evidence_ids:
        - EVID-3003
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00040
      definition_of_done:
        criteria:
        - "WorkObject can be created and modified"
        - "All lifecycle state transitions validated"
        - "Invalid transitions rejected with error"
        - "AttemptRecord tracks execution history"
        - "Property tests for state machine"
        evidence_ids:
        - EVID-3003

    - ticket_id: TCK-00042
      title: "Implement Lease and Budget types"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00042.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00042.md"
      scope:
        in_scope:
        - "Define Lease struct with all fields"
        - "Define Budget struct with resource dimensions"
        - "Define LeaseScope for authority boundaries"
        - "Implement lease validation"
        - "Implement budget tracking and deduction"
        - "Implement lease derivation for sub-holons"
        out_of_scope:
        - "Lease registrar (TCK-00018 in RFC-0001)"
        - "Distributed lease coordination"
      binds:
        requirement_ids:
        - REQ-0019
        - REQ-0022
        - REQ-0035
        - REQ-3004
        evidence_ids:
        - EVID-3004
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00040
      definition_of_done:
        criteria:
        - "Lease can be created with scope and budget"
        - "Lease expiration is enforced"
        - "Budget deduction tracks multiple resources"
        - "Lease derivation respects parent scope"
        - "Budget exhaustion triggers correct error"
        evidence_ids:
        - EVID-3004

    - ticket_id: TCK-00043
      title: "Implement LedgerEvent and chain verification"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00043.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00043.md"
      scope:
        in_scope:
        - "Define LedgerEvent struct"
        - "Define EventType enum with all variants"
        - "Implement event serialization"
        - "Implement hash chain linking"
        - "Implement chain verification"
        out_of_scope:
        - "Ledger storage backend (RFC-0001)"
        - "Event projection (RFC-0001)"
      binds:
        requirement_ids:
        - REQ-0007
        - REQ-0015
        evidence_ids:
        - EVID-3002
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00040
      - TCK-00041
      definition_of_done:
        criteria:
        - "LedgerEvent captures all holonic operations"
        - "Events serialize deterministically"
        - "Hash chain links events correctly"
        - "Chain verification detects tampering"
        - "Event types cover full lifecycle"
        evidence_ids:
        - EVID-3002

    # =================================================================
    # PHASE 2: Episode Controller
    # =================================================================
    - ticket_id: TCK-00044
      title: "Implement EpisodeContext and stop conditions"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00044.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00044.md"
      scope:
        in_scope:
        - "Implement EpisodeContext construction"
        - "Implement GoalSpec and ProgressState"
        - "Implement stop condition predicates"
        - "Implement budget checks in episode loop"
        - "Implement episode result handling"
        out_of_scope:
        - "Actual agent invocation (adapter concern)"
        - "Tool mediation (RFC-0001)"
      binds:
        requirement_ids:
        - REQ-0018
        - REQ-0035
        - REQ-3002
        evidence_ids:
        - EVID-3002
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00040
      - TCK-00041
      - TCK-00042
      definition_of_done:
        criteria:
        - "EpisodeContext built from work state"
        - "Stop conditions evaluate correctly"
        - "GoalSatisfied detected from evidence"
        - "BudgetExhausted triggers termination"
        - "Episode results update work state"
        evidence_ids:
        - EVID-3002

    # =================================================================
    # PHASE 3: Holon Spawning
    # =================================================================
    - ticket_id: TCK-00045
      title: "Create spawn_holon orchestration function"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00045.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00045.md"
      scope:
        in_scope:
        - "Implement spawn_holon function"
        - "Integrate lease validation"
        - "Implement episode loop orchestration"
        - "Implement escalation forwarding"
        - "Implement work completion handling"
        out_of_scope:
        - "Distributed holon coordination"
        - "Load balancing"
      binds:
        requirement_ids:
        - REQ-0001
        - REQ-0021
        - REQ-3001
        evidence_ids:
        - EVID-3001
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00041
      - TCK-00042
      - TCK-00043
      - TCK-00044
      definition_of_done:
        criteria:
        - "spawn_holon creates work and issues lease"
        - "Episode loop executes until stop condition"
        - "Artifacts emitted to ledger"
        - "Escalation propagates to caller"
        - "Integration test with mock holon"
        evidence_ids:
        - EVID-3001

    # =================================================================
    # PHASE 4: Skill Integration
    # =================================================================
    - ticket_id: TCK-00046
      title: "Add holon: field to skill frontmatter schema"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00046.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00046.md"
      scope:
        in_scope:
        - "Extend skill frontmatter schema with holon: field"
        - "Define HolonConfig schema (contract, stop_conditions, tools)"
        - "Update skill parser to handle holon config"
        - "Validate holon config on skill load"
        out_of_scope:
        - "Automatic holon instantiation"
        - "Runtime holon configuration"
      binds:
        requirement_ids:
        - REQ-3001
        evidence_ids:
        - EVID-3001
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00040
      definition_of_done:
        criteria:
        - "holon: field accepted in skill frontmatter"
        - "HolonConfig schema documented"
        - "Invalid holon config rejected"
        - "Existing skills without holon: work unchanged"
        - "Schema tests pass"
        evidence_ids:
        - EVID-3001

    - ticket_id: TCK-00047
      title: "Create example-holon skill demonstrating pattern"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00047.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00047.md"
      scope:
        in_scope:
        - "Create documents/skills/example-holon/ directory"
        - "Write SKILL.md with holon: configuration"
        - "Implement example skill behavior"
        - "Document the pattern with inline comments"
        - "Write integration test for skill execution"
        out_of_scope:
        - "Production use of example skill"
      binds:
        requirement_ids:
        - REQ-3001
        - REQ-3002
        evidence_ids:
        - EVID-3001
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00045
      - TCK-00046
      definition_of_done:
        criteria:
        - "example-holon skill loads correctly"
        - "Skill executes through episode loop"
        - "Stop conditions work as documented"
        - "Pattern is clear from documentation"
        - "Integration test passes"
        evidence_ids:
        - EVID-3001

    - ticket_id: TCK-00048
      title: "Update dev-rfc to use holon pattern"
      ticket_files:
        meta_ref: "documents/work/tickets/TCK-00048.yaml#ticket_meta"
        body_path: "documents/work/tickets/TCK-00048.md"
      scope:
        in_scope:
        - "Add holon: configuration to dev-rfc SKILL.md"
        - "Define stop conditions for RFC generation"
        - "Define budget limits for RFC work"
        - "Test dev-rfc as holon"
        out_of_scope:
        - "Changing dev-rfc behavior"
        - "Other skill updates"
      binds:
        requirement_ids:
        - REQ-3001
        evidence_ids:
        - EVID-3001
      custody_agent_roles:
      - AGENT_IMPLEMENTER
      responsibility_domains:
      - DOMAIN_KERNEL
      dependencies:
      - TCK-00045
      - TCK-00046
      definition_of_done:
        criteria:
        - "dev-rfc skill has holon: configuration"
        - "Stop conditions appropriate for RFC work"
        - "Budget limits prevent runaway execution"
        - "dev-rfc executes correctly as holon"
        - "No regression in existing behavior"
        evidence_ids:
        - EVID-3001

    requirement_coverage:
      notes: |
        All RFC-0003 requirements are covered by tickets. The framework
        establishes patterns that will be used by RFC-0001 kernel implementation
        and future skills.
      uncovered_requirements: []

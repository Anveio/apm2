rfc_test_and_evidence:
  schema_version: "2026-01-24"
  template_version: "2026-01-24"
  test_plan:
    unit:
    - id: UT-3001
      name: "Holon trait compliance tests"
      scope: "Verify trait can be implemented correctly"
      coverage_target: ">90%"
      framework: "cargo test"
      evidence_ids:
      - EVID-3001
    - id: UT-3002
      name: "WorkObject state machine tests"
      scope: "State transitions, validation, history"
      coverage_target: ">95%"
      framework: "cargo test"
      evidence_ids:
      - EVID-3003
    - id: UT-3003
      name: "Lease and Budget tests"
      scope: "Validation, expiration, budget tracking"
      coverage_target: ">95%"
      framework: "cargo test"
      evidence_ids:
      - EVID-3004
    - id: UT-3004
      name: "LedgerEvent tests"
      scope: "Serialization, hash chain, verification"
      coverage_target: ">95%"
      framework: "cargo test"
      evidence_ids:
      - EVID-3002
    - id: UT-3005
      name: "Stop condition tests"
      scope: "All StopCondition variants, predicate evaluation"
      coverage_target: ">95%"
      framework: "cargo test"
      evidence_ids:
      - EVID-3002

    integration:
    - id: IT-3001
      name: "Episode loop integration test"
      scope: "Full episode execution with mock holon"
      test_environment: "Local with mock agent"
      evidence_ids:
      - EVID-3002
    - id: IT-3002
      name: "Work lifecycle integration test"
      scope: "Work creation through completion"
      test_environment: "Local with mock holon"
      evidence_ids:
      - EVID-3003
    - id: IT-3003
      name: "Spawn holon integration test"
      scope: "Sub-holon creation and coordination"
      test_environment: "Local with test holons"
      evidence_ids:
      - EVID-3001
    - id: IT-3004
      name: "Skill-as-holon integration test"
      scope: "example-holon skill execution"
      test_environment: "Local with real skill"
      evidence_ids:
      - EVID-3001

    property:
    - id: PT-3001
      name: "WorkLifecycle state machine properties"
      scope: "All valid transitions reachable; no invalid transitions"
      framework: "proptest"
      properties:
      - "All states reachable from Pending"
      - "Completed and Failed are terminal"
      - "No transition from terminal states"
      evidence_ids:
      - EVID-3003
    - id: PT-3002
      name: "Budget monotonicity"
      scope: "Budget only decreases; never exceeds initial"
      framework: "proptest"
      properties:
      - "budget_consumed <= initial_budget"
      - "budget_remaining = initial - consumed"
      - "deduction is monotonic"
      evidence_ids:
      - EVID-3004
    - id: PT-3003
      name: "Event chain integrity"
      scope: "Hash chain is tamper-evident"
      framework: "proptest"
      properties:
      - "Modification to any event breaks chain"
      - "Reordering events breaks chain"
      - "Insertion breaks chain"
      evidence_ids:
      - EVID-3002

    chaos:
    - id: CH-3001
      name: "Lease expiration during episode"
      scope: "Holon handles lease expiration gracefully"
      injection: "Expire lease mid-episode"
      expected_behavior: "Episode terminates with BudgetExhausted"
      evidence_ids:
      - EVID-3004
    - id: CH-3002
      name: "Episode loop stuck detection"
      scope: "Detect and handle non-terminating episodes"
      injection: "Mock holon that never satisfies goal"
      expected_behavior: "max_episodes reached; escalation triggered"
      evidence_ids:
      - EVID-3002
    - id: CH-3003
      name: "Sub-holon crash recovery"
      scope: "Parent handles sub-holon failure"
      injection: "Kill sub-holon process"
      expected_behavior: "Work escalated to parent; no data loss"
      evidence_ids:
      - EVID-3001

  evidence_bundle:
    root: "evidence/rfc/RFC-0003/"
    artifact_registry:
      mode: FILE_PER_ARTIFACT
      local_root: "evidence_artifacts/"
      local_artifacts:
      - artifact_id: EVID-3001
        artifact_ref: "evidence_artifacts/EVID-3001.yaml#rfc_evidence_artifact"
      - artifact_id: EVID-3002
        artifact_ref: "evidence_artifacts/EVID-3002.yaml#rfc_evidence_artifact"
      - artifact_id: EVID-3003
        artifact_ref: "evidence_artifacts/EVID-3003.yaml#rfc_evidence_artifact"
      - artifact_id: EVID-3004
        artifact_ref: "evidence_artifacts/EVID-3004.yaml#rfc_evidence_artifact"
      imports:
      - source_prd: PRD-0001
        imported_ids: []
        note: "RFC-0003 defines new evidence; does not import PRD evidence"
